<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Study Tracker</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <link rel="manifest" href="manifest.json">
        <link rel="stylesheet" href="all.min.css">
        <script src="html2pdf.bundle.min.js"></script>
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            // Wait for the window to fully load to ensure all resources are ready
            window.onload = function() {
                if ('serviceWorker' in navigator) {
                    // Register the service worker, setting the scope to the current directory './'
                    navigator.serviceWorker.register('serviceworker.js', {scope: './'})
                        .then(function(registration) {
                            console.log('Service Worker registered successfully with scope:', registration.scope);
                        })
                        .catch(function(error) {
                            console.error('Service Worker registration failed:', error);
                        });
                } else {
                    console.warn('Service Workers are not supported by this browser.');
                }
            };
        </script>
       
    </head>
    <body>
        <div>
           
         
                
                <div id="login" class="login-container">
                    <div class="header">
                        <h1>Academic Study Tracker</h1>
                        <p>Login to access Study Tracker</p>
                    </div>

                    <div class="login-form">

                        <form id="loginForm" method="post">
                            <div class="form-group">
                                <label for="username">Username or Email</label>
                                <input type="text" id="username" min="8" placeholder="Enter your username or email" required>
                            </div>

                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" id="password" min="5" placeholder="Enter your password" required>
                            </div>

                            <button type="submit" class="login-btn">Login</button>
                        </form>
                        <div class="divider"><span onclick="document.getElementById('login').classList.remove('active');document.getElementById('reLogin').classList.add('active')">Forgot password</span></div>
                        <button class="login-btn" onclick="document.getElementById('login').classList.remove('active');startRedirect_SignIn()">Create Account</button>
                        
                    </div>
                </div>
                
                <!--SignIn-->
                <div id="signIn" class="login-container">
                    
                </div>
                
                
                <!--forgot password-->
                <div id="reLogin" class="login-container">
                    <div class="header">
                        <h1> Academic Study Tracker</h1>
                        <p>Login to access Study Tracker</p>
                    </div>

                    <div class="login-form">
                        <div class="error-message" id="2errorMessage"></div>
                        <div class="success-message" id="successMessage"></div>

                        <form id="reLoginForm" method="post">
                            <div class="form-group">
                                <label for="username">Email</label>
                                <input type="email" id="reEmail" min="10" placeholder="Enter your email" required>
                            </div>

                            <div class="form-group">
                                <label for="password">Username</label>
                                <input type="text" id="reUserName" min="8" placeholder="Enter your full name" required>
                            </div>
                            <div class="form-group">
                                <label for="username">Phone Number</label>
                                <input type="number" min="880000000" id="rePhoneNumber" placeholder="Enter your phone number" required>
                            </div>

                            <button type="submit" class="login-btn">Submit</button>
                        </form>
                        
     
                    </div>
                </div>
            
            
         <!-- Track Study Tab -->
         
        <div id="track" class="tab-content active">
			<header>
                <h1>üìö Study Tracker Pro</h1>
                <p>Track your progress and improve your study habits - 90% Offline</p>
            </header>
            <header>
				<h2>Log Your Study Session</h2>
            </header>
            <form id="form">
            <div class="form-group">
                <label>Subject</label>
                <select id="studySubject" onfocus="document.getElementById('MissedTopic').style.display = 'block'; document.getElementById('myowntopic').style.display = 'block'" required >
                    <!-- Subjects will be populated here -->
                </select>
                <div id='MissedTopic'>
                <label>Missed Topic</label>
                <h4>Choose one to be back on track</h4>
                <select id="missedT" onfocus="updateMissedStudyTopicDropdown()" >
                    <!-- Missed topics will be populated here -->
                </select>
                </div>
            </div>
            <div id="1remove" class="form-group">
                <label>Date</label>
                <input type="date" id="studyDate" required onclick="document.getElementById('studyDate').max = today">
            </div>
            <div class="form-group">
                <label id="hourslabel">Hours Studied</label>
                <input type="number" id="studyHours" min='1' max='3' placeholder="2" required>
            </div>
            <div class="form-group">
                <label>Notes (Recommended)</label>
                <select id="myowntopic" onfocus="updateStudyTopicDropdown()"></select>
                <textarea id="studyNotes" required placeholder="What have you study?"></textarea>
            </div>
            <button>Save Study Session</button>
            </form>
            <div id="todayReminders" class="reminder">
                <h3>üì¢ Today's Remainders</h3>
                <div id="reminderList"></div>
            </div>
            <div id="missedTopicReminders" class="reminder" style="display: none;background-color: red;">
                <h3>üéØ Missed Sessions</h3>
                <div id="mTRlist"></div>
            </div>
        </div>
        
                <!-- Progress Tab -->
        <div id="progress" class="tab-content">
			<header>
				<h2>Your Study Progress</h2>
            </header>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalHours">0</div>
                    <div>Total Hours</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="subjectsCount">0</div>
                    <div>Subjects</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completionRate">0%</div>
                    <div>Completion Rate</div>
                </div>
            </div>
				
			<header>
				<h3>Subject Progress</h3>
            </header>
            <div id="progressList" class="study-grid">
                <!-- Progress bars will appear here -->
            </div>
        </div>
        
        <!-- Group -->
        <div id="group" class="tab-content " >
			<header>
                <h1>School Chatsüè´</h1>
         </header>
            <p style="color: rgb(247, 43, 7); text-align: center;font-family: 'Times New Roman', Times, serif;" id='warn1'>Chat with friends to refresh brain but don`t waste your time</p>
            <div id="chatsList" class="chatsList">
                <!-- chats will appear here -->
            </div>
            
            
            <div class="chat-body">
                <!-- Main Chat Input Container (Mimics Gemini's dark card) -->
                <div id="prompt-container-chat" class="w-full max-w-2xl px-2 sm:px-4 md:px-6 lg:px-8 py-3 fixed bottom-0 left-1/2 -translate-x-1/2 z-50">
                    
                    <div class="bg-[#202022] border border-[#3c3c3e] rounded-3xl shadow-xl flex items-end p-2 sm:p-3 relative">
                        
                        

                        <!-- Textarea (Main Input Area) -->
                        <div class="flex-grow min-h-[2.5rem] max-h-[15rem] overflow-y-auto pr-2">
                            <textarea
                                id="textprompt-chat"
                                placeholder="Write your message"
                                rows="1"
                                class="w-full resize-none bg-transparent text-white placeholder-[#7e7e7e] focus:outline-none py-2 leading-6 text-base"
                                style="min-height: 2.5rem;"
                            ></textarea>
                        </div>

                        <!-- Action Icons (Right side: Mode label, Microphone, Send) -->
                        <div class="flex items-end space-x-2 pl-2">
                            
                            <!-- Mode Label (Mobile/Compact Mode Placeholder) -->
                            <div id="mode-display-compact" style="display: none;">
                                <span id="current-mode-chat">Chat</span>
                            </div>

                            <!-- Microphone Button -->
                            <button id="mic-button" class="p-2 sm:p-2.5 rounded-full text-[#b0b0b0] hover:bg-[#343436] transition duration-150">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                    <path d="M8.25 4.5a3.75 3.75 0 1 1 7.5 0v10.5a3.75 3.75 0 1 1-7.5 0V4.5Z" />
                                    <path d="M12 21a5.25 5.25 0 1 1-10.5 0 .75.75 0 0 0-1.5 0c0 4.142 3.358 7.5 7.5 7.5s7.5-3.358 7.5-7.5a.75.75 0 0 0-1.5 0 5.25 5.25 0 0 1-9 3.978V21h-.75a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5h-.75Z" />
                                    <path fill-rule="evenodd" d="M18.75 9c0 .872.23 1.708.647 2.449A8.96 8.96 0 0 0 21.75 12h-1.5a.75.75 0 0 0-.75.75v1.5c0 .414.336.75.75.75h1.5a8.96 8.96 0 0 0-2.353 1.134.75.75 0 0 0 .584 1.34A10.5 10.5 0 0 0 23.25 12V9c0-.414-.336-.75-.75-.75h-3c-.414 0-.75.336-.75.75Z" clip-rule="evenodd" />
                                </svg>
                            </button>

                            <!-- Send Button -->
                            <button id="send-button-chat" disabled class="p-2 sm:p-2.5 rounded-full text-[#7e7e7e] bg-[#343436] transition duration-200 disabled:opacity-50">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 transform rotate-90">
                                    <path d="M3.478 2.405a.75.75 0 0 0-.926.94l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.599 60.599 0 0 0 18.442-8.31.75.75 0 0 0 0-1.374 60.599 60.599 0 0 0-18.442-8.31Z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
                                     
           
        </div>

        <!-- AI help -->
        <div id="gic" class="tab-content">
			<header>
                <h1>GIC AI‚ú®</h1>
         </header>
            <p id='warn2' style="color: rgb(247, 43, 7); text-align: center;font-family: 'Times New Roman', Times, serif;">My goal is to help you to succes. PlEASE TRY MULTIPLE TIMES YOURSELF FIRST BEFORE ME.</p>
            
            <div id="AIchatsList" class="chatsList">
				
                <!-- chats will appear here -->
            </div>

            <div id="Quizresultscont" class="stat-card" style="display: none;">
                    <div class="stat-number" id="Quizresults">0%</div>
                    <div>GIC AI feedback</div>
            </div>

            <div>
                <select style="display: none;" id="promptST"></select>
            </div>

            <div class="chat-body">    
            <!-- Main Chat Input Container (Mimics Gemini's dark card) -->
            <div id="prompt-container-ai" class="w-full max-w-2xl px-2 sm:px-4 md:px-6 lg:px-8 py-3 fixed bottom-0 left-1/2 -translate-x-1/2 z-50">
                
                <div class="bg-[#202022] border border-[#3c3c3e] rounded-3xl shadow-xl flex items-end p-2 sm:p-3 relative">
                    
                    <!-- Action Buttons (Left side: +, Model/Mode Selector) -->
                    <div class="flex items-center space-x-2 mr-2">
						
                        <!-- Attachment/Action Button (Plus Icon) -->
						<button id="action-button" class="p-2 sm:p-2.5 rounded-full text-[#b0b0b0] hover:bg-[#343436] transition duration-150">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
								<path fill-rule="evenodd" d="M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd" />
							</svg>
						</button>
                        
                        
                        <!-- Model/Mode Selector (Toggle Icon with drop-down placeholder) -->
                        <div class="relative group">
                            <button id="mode-button" class="p-2 sm:p-2.5 rounded-full text-[#b0b0b0] hover:bg-[#343436] transition duration-150">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                    <path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd" />
                                </svg>
                            </button>
                            <div id="mode-dropdown" class="absolute bottom-full left-0 mb-2 w-40 bg-[#343436] text-white text-sm rounded-lg shadow-lg opacity-0 pointer-events-none transition-opacity duration-300">
                                <div class="p-2">
                                    <div class="font-bold border-b border-[#444] pb-1 mb-1">Select Mode</div>
                                    <p class="py-1 px-2 cursor-pointer hover:bg-[#444] rounded" data-mode="Question">Question</p>
                                    <p class="py-1 px-2 cursor-pointer hover:bg-[#444] rounded" onclick="quizMaker()" data-mode="Quiz">Quiz</p>
                                </div>
                            </div>
                        </div>
                        
                    </div>

                    <!-- Textarea (Main Input Area) -->
                    <div class="flex-grow min-h-[2.5rem] max-h-[15rem] overflow-y-auto pr-2">
                        <textarea
                            id="textprompt-ai"
                            placeholder="Ask Gemini"
                            rows="1"
                            class="w-full resize-none bg-transparent text-white placeholder-[#7e7e7e] focus:outline-none py-2 leading-6 text-base"
                            style="min-height: 2.5rem;"
                        ></textarea>
                    </div>

                    <!-- Action Icons (Right side: Mode label, Microphone, Send) -->
                    <div class="flex items-end space-x-2 pl-2">
                        
                        <!-- Mode Label (Mobile/Compact Mode Placeholder) -->
                        <div id="mode-display-compact" class="text-sm text-[#b0b0b0] py-1 px-2 rounded-lg bg-transparent hidden sm:block">
                            <span id="current-mode-ai">Question</span>
                        </div>

                        <!-- Send Button -->
                        <button id="send-button-ai" disabled class="p-2 sm:p-2.5 rounded-full text-[#7e7e7e] bg-[#343436] transition duration-200 disabled:opacity-50">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 transform rotate-90">
                                <path d="M3.478 2.405a.75.75 0 0 0-.926.94l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.599 60.599 0 0 0 18.442-8.31.75.75 0 0 0 0-1.374 60.599 60.599 0 0 0-18.442-8.31Z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div> 
            </div>           
             <!--<div id="AItextprompt" class="prompt-container" >
                        <div class="attachement-btn">
                            <i class="fa fa-paperclip"></i>
                        </div>
                        <textarea id="aiprompt" type="text" class="prompt-input" placeholder="Ask me any School question"></textarea>

                        <div class="send-btn">
                            <i id="aiBt" class="fa fa-paper-plane" onclick="promptSwitch()"></i>
                        </div>         
                </div> 
                <div>
                    <select id="promptST"></select>
                </div>
                <div>
                            -- Menu List
                            <ol class="menu-list">
                                <li><button class="nav-tab active" onclick="quizMaker()">üîéQuiz</button></li>                          
                            <!-- 
                            <li><input id="filenameAtt" type="file">Img</li>
                            --                            
                            </ol>  
                        </div> -->             
        </div>

        <!-- Week Report -->
        <div id="report" class="tab-content">
            <h2 style="font-size: larger; color: red; text-align: center;font-family: 'Times New Roman', Times, serif;">Week Review & Analysis</h2>
    
            <div ></div>
            
            
        </div>
        <!-- profile Tab-->
         <div id="profile" class="tab-content">
                <header>Profile</header>
                <div id="userDetails" class="reminder">
                    
                </div>
                <div class="divider"><span>---</span></div>
                 <!--Timetable Created-->
                 <div id="timetable">   
            
                        <div class="header"> 
                        <p>Timetable</p>
                        </div>
                                
                              <table id="Ttable" class="table-container">
                                  <tr><th>DAY</th><th colspan="6">ALLOCATE TIME YOURSELF</th></tr>
                                  <tr id="Monday"></tr>
                                  <tr id="Tuesday"></tr>
                                  <tr id="Wednesday"></tr>
                                  <tr id="Thursday"></tr>
                                  <tr id="Friday"></tr>
                                  <tr><th colspan="7">NOTE: You can follow your study style or our Suggestions below</th></tr>
                                  <tr><td>Saturday</td><td colspan="6"><ul>-Write some exams pastpapers[<ol>=>Try to make environment like MANED exam room.</ol><ol>=>Finnish writing the paper 15min before allowed Time.</ol><ol>=>Find some to mark you and correct You or use AI but don`t depend on it.</ol><ol>=>Note: You`ll be doing this alone, so you'll be killing yourself by cheating or missing.</ol>]</ul><ul>-Review this week class exercises</ul><ul>-Your style</ul></td></tr>
                                  <tr><td>Sunday</td><td colspan="6"><ul>-Write one composition(letter,speech,report,short story)[<ol>=>Try to make environment like MANED exam room.</ol><ol>=>Finnish writing the composition within 45min.</ol><ol>=>Tomorrow Submit to your English teacher to mark you and make sure you recieve oral feedback.</ol><ol>=>Note: You`ll be doing this alone, so you'll be killing yourself by cheating or missing.</ol>]</ul><ul>-Review last week most challenging topic.</ul><ul>-Your style</ul></td></tr>  
                                </table>
                      <button class="login-btn" onclick="saveAsPDF('timetable','Study Timetable')">Save</button>
                      
                      
                </div>     
                      
            </div>

         <!-- Review Tab -->
        <div id="review" class="tab-content">
			<header>
				<h2>Weekly Review & Feedback</h2>
            </header>
            <div id="weeklyFeedback" class="reminder">
                <p>Your weekly feedback will appear here after you start tracking your study sessions.</p>
            </div>
            <header>
				<h3>Study History</h3>
			</header>
            <div id="studyHistory">
                <!-- Study sessions will appear here -->
            </div>
           
        </div>

        
		 <!--
                <div class="profile-container rotate" id="profile-container">
				<div class="profile-text">MGY</div>
				</div>
                <!-- Menu Container -->
        <div id="menu-container">
            <p class="menu-btn" onclick="toggleMenu()">‚ò∞</p>
        </div>

        <!-- Slide-in Menu -->
        <nav class="menu" id="menu">
            <a class="nav-tab active" onclick="switchTab('track')">Home</a>                         
            <a class="nav-tab" onclick="switchTab('progress');">Progress</a>            
            <a class="nav-tab" onclick="switchTab('review')">Review</a>
            <a class="nav-tab" onclick="switchTab('report')">Week Overview Report</a>
            <a class="nav-tab" onclick="switchTab('group')">Chat space</a>
            <a class="nav-tab" onclick="switchTab('gic')">GIC AI</a>
            <a class="nav-tab" onclick="switchTab('profile')">Profile</a>
        </nav>
  
  
     <iframe id="appFrame"></iframe>  
    <div class="error-message" id="errorMessage"></div>
    <div class="success-message" id="successMessage">
		<p id="quoteDisplay" ></p>
    </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        function toggleMenu() {
        document.getElementById("menu").classList.toggle("active");
        }
    </script>
    </body>
</html>

